"use strict";(self["webpackChunkvue3_0"]=self["webpackChunkvue3_0"]||[]).push([[669],{7061:function(t,e,a){function r(t){return{all:t=t||new Map,on:function(e,a){var r=t.get(e);r?r.push(a):t.set(e,[a])},off:function(e,a){var r=t.get(e);r&&(a?r.splice(r.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var r=t.get(e);r&&r.slice().map((function(t){t(a)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return o}});const n=r();var o=n},335:function(t,e,a){var r=a(3396);e["Z"]=()=>{const{appContext:t}=(0,r.FN)(),e=t.config.globalProperties;return{proxy:e}}},1669:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var r=a(3396);const n={key:1};function o(t,e,a,o,i,s){const l=(0,r.up)("d3SimpleBarChart");return t.data?((0,r.wg)(),(0,r.j4)(l,{key:0,data:t.data},null,8,["data"])):((0,r.wg)(),(0,r.iD)("div",n,"加载中。。。"))}const i={class:"bar-chart--simple",style:{height:"100%"}},s={ref:"barRef"};function l(t,e,a,n,o,l){return(0,r.wg)(),(0,r.iD)("div",i,[((0,r.wg)(),(0,r.iD)("svg",s,null,512))])}var c=a(4870),u=a(335),d=(0,r.aZ)({name:"barChart",props:{data:{type:Array,required:!0,default:()=>[]}},setup(t){const e=(0,c.iH)(null),{proxy:a}=(0,u.Z)();(0,r.bv)((()=>{n(t.data)})),(0,r.YP)(t,(t=>{n(t.data)}),{deep:!0});const n=t=>{const r=e.value.parentNode.offsetWidth,n={top:80,right:20,bottom:30,left:60},o=r-n.left-n.right,i=700-n.top-n.bottom;let s=a.$d3.select(e.value).html("").attr("width",o+n.left+n.right).attr("height",i+n.top+n.bottom),l=a.$d3.scaleBand().rangeRound([0,o]).padding(.3).domain(t.map((function(t){return t.letter}))),c=a.$d3.scaleLinear().rangeRound([i,0]).domain([0,a.$d3.max(t,(function(t){return t.frequency}))]);const u=o/t.length*.7,d=a.$d3.ticks(0,a.$d3.max(t,(t=>t.frequency)),10),f=["#ccc","#ddd"];let p=a.$d3Tip().attr("class","d3-tip").offset([-10,0]).html((function(t){return"<strong>星期"+t.letter+"<br>空置率:</strong> <span style='color:#ffeb3b'>"+(100*t.frequency).toFixed(2)+"%</span>"}));s.call(p);let h=s.append("g").attr("transform","translate("+n.left+","+n.top+")");h.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+i+")").call(a.$d3.axisBottom(l)),h.append("g").attr("class","axis axis--y").call(a.$d3.axisLeft(c).ticks(10,"%")).append("text").attr("y",-16).attr("dy",".71em").style("text-anchor","middle").style("fill","#000").text("空置率 (%)"),h.append("g").attr("class","bar--bg-bar").selectAll("rect").data(a.$d3.range(d.length-1)).enter().append("rect").attr("stroke","none").attr("stroke-width",0).attr("fill",(function(t,e){return f[e%2]})).attr("x",1).attr("width",o).attr("height",(function(t,e){return c(d[e])-c(d[e+1])})).attr("y",(function(t,e){return c((e+1)*d[1])})),h.selectAll(".bar").data(t).enter().append("rect").on("mouseover",p.show).on("mouseout",p.hide).attr("class","bar").attr("fill","#8a2be2").attr("x",(function(t){return l(t.letter)})).attr("y",i).attr("width",l.bandwidth()).attr("height",0).transition().duration(200).ease(a.$d3.easeBounceInOut).delay((function(t,e){return 200*e})).attr("y",(function(t){return c(t.frequency)})).attr("height",(function(t){return i-c(t.frequency)})),h.append("g").attr("class","bar--text").selectAll("text").data(t).enter().append("text").attr("fill","orange").attr("font-size","14px").attr("text-anchor","middle").attr("x",(function(t){return l(t.letter)})).attr("y",(function(t){return c(t.frequency)})).attr("dx",u/2).attr("dy","1em").text((function(t){return(100*t.frequency).toFixed(2)+"%"})).on("mouseover",p.show).on("mouseout",p.hide),s.append("g").attr("class","bar--title").append("text").attr("fill","#000").attr("font-size","16px").attr("font-weight","700").attr("text-anchor","middle").attr("x",r/2).attr("y",20).text("简单柱状图")};return{barRef:e}}}),f=a(89);const p=(0,f.Z)(d,[["render",l]]);var h=p,g=a(7860),x=a(7061),m=(0,r.aZ)({name:"d3Bar",components:{d3SimpleBarChart:h},setup(){(0,r.bv)((()=>{t(),x.Z.on("searchData",(()=>{t()}))}));const t=()=>{(0,g.FG)().then((t=>{e.data=t.data}))},e=(0,c.qj)({data:null});return{...(0,c.BK)(e)}}});const y=(0,f.Z)(m,[["render",o]]);var b=y}}]);
//# sourceMappingURL=669.b6e21350.js.map