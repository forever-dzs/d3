{"version":3,"file":"static/js/517.13e0471e.js","mappings":"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","sources":["webpack://vue3.0/./src/assets/util/useCurrentInstance.ts","webpack://vue3.0/./src/views/home/home.vue?7b8f","webpack://vue3.0/./src/components/d3SimpleForceChart.vue?19be","webpack://vue3.0/./src/components/d3SimpleForceChart.vue?a006","webpack://vue3.0/./src/components/d3SimpleForceChart.vue","webpack://vue3.0/./src/views/home/home.vue?8fa5","webpack://vue3.0/./src/views/home/home.vue"],"sourcesContent":["/*\r\n * @Author: DongZS\r\n * @Date: 2022-04-18 10:53:17\r\n * @Description: 页面\r\n * @FilePath: \\scf-front-corp-staticd:\\练习\\vue3.0\\src\\assets\\util\\useCurrentInstance.ts\r\n */\r\nimport { getCurrentInstance, ComponentInternalInstance } from \"vue\"\r\nexport default () => {\r\n\tconst { appContext } = getCurrentInstance() as ComponentInternalInstance\r\n\tconst proxy = appContext.config.globalProperties\r\n\treturn { proxy }\r\n}","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_d3SimpleForceChart = _resolveComponent(\"d3SimpleForceChart\")!\n\n  return (_ctx.data)\n    ? (_openBlock(), _createBlock(_component_d3SimpleForceChart, {\n        key: 0,\n        data: _ctx.data\n      }, null, 8, [\"data\"]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"加载中。。。\"))\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"force-chart--simple\",\n  style: {\"height\":\"100%\"}\n}\nconst _hoisted_2 = { ref: \"forceRef\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(), _createElementBlock(\"svg\", _hoisted_2, null, 512))\n  ]))\n}","\r\ninterface Edge {\r\n  source: number,\r\n  target: number,\r\n  relation?: string,\r\n  value: number\r\n}\r\ninterface Node {\r\n  name: string\r\n}\r\nimport { defineComponent, ref, onMounted } from \"vue\";\r\nimport useCurrentInstance from \"@/assets/util/useCurrentInstance\"\r\nexport default defineComponent({\r\n  name: \"d3SimpleForceChart\",\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      required: true,\r\n      default: () => {\r\n        return {}\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n\t\tconst { proxy } = useCurrentInstance()\r\n    const forceRef = ref<any>(null);\r\n    const initForce = (): void => {\r\n      const containerWidth = forceRef.value.parentNode.offsetWidth;\r\n      const data = props.data;\r\n      const margin = { top: 60, right: 60, bottom: 60, left: 60 };\r\n      const width = containerWidth - margin.left - margin.right;\r\n      const height = 700 - margin.top - margin.bottom;\r\n      let chart = proxy.$d3\r\n        .select(forceRef.value)\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom);\r\n      let g = chart\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); // 设最外包层在总图上的相对位置\r\n      // 缩放拖拽\r\n      chart.call(proxy.$d3.zoom().scaleExtent([0.5, 2]).on('zoom', () => {\r\n        g.attr(\"transform\", proxy.$d3.event.transform)\r\n      }))\r\n      let simulation = proxy.$d3\r\n        .forceSimulation() // 构建力导向图\r\n        .force(\"link\", proxy.$d3\r\n            .forceLink()\r\n            .id(function(d: any, i: number) :number {\r\n              return i;\r\n            })\r\n            .distance(function (d: any): number {\r\n              return d.value * 50;\r\n            })\r\n        )\r\n        .force(\"charge\", proxy.$d3.forceManyBody())  // 引力\r\n        .force(\"center\", proxy.$d3.forceCenter(width / 2, height / 2))  // 中心点\r\n        .force(\"collide\", proxy.$d3.forceCollide().radius(() => 80))  // 碰撞力\r\n\r\n      let z = proxy.$d3.scaleOrdinal(proxy.$d3.schemeCategory20); // 通用线条的颜色\r\n\r\n      let link = g\r\n        .append(\"g\") // 画连接线\r\n        .attr(\"class\", \"links\")\r\n        .selectAll(\"line\")\r\n        .data(data.edges)\r\n        .enter()\r\n        .append(\"line\");\r\n\r\n      let linkText = g\r\n        .append(\"g\") // 画连接连上面的关系文字\r\n        .attr(\"class\", \"link-text\")\r\n        .selectAll(\"text\")\r\n        .data(data.edges)\r\n        .enter()\r\n        .append(\"text\")\r\n        .text(function (d: any) {\r\n          return d.relation;\r\n        });\r\n\r\n      let node = g\r\n        .append(\"g\") // 画圆圈和文字\r\n        .attr(\"class\", \"nodes\")\r\n        .selectAll(\"g\")\r\n        .data(data.nodes)\r\n        .enter()\r\n        .append(\"g\")\r\n        .on(\"mouseover\", function (d: any) {\r\n          //显示连接线上的文字\r\n          linkText.style(\"fill-opacity\", function (edge: Edge) {\r\n            if (edge.source === d || edge.target === d) {\r\n              return 1;\r\n            }\r\n          });\r\n          //连接线加粗\r\n          link\r\n            .style(\"stroke-width\", function (edge: Edge) {\r\n              if (edge.source === d || edge.target === d) {\r\n                return \"2px\";\r\n              }\r\n            })\r\n            .style(\"stroke\", function (edge: Edge) {\r\n              if (edge.source === d || edge.target === d) {\r\n                return \"#000\";\r\n              }\r\n            });\r\n        })\r\n        .on(\"mouseout\", function (d: any) {\r\n          //隐去连接线上的文字\r\n          linkText.style(\"fill-opacity\", function (edge: Edge) {\r\n            if (edge.source === d || edge.target === d) {\r\n              return 0;\r\n            }\r\n          });\r\n          //连接线减粗\r\n          link\r\n            .style(\"stroke-width\", function (edge: Edge) {\r\n              if (edge.source === d || edge.target === d) {\r\n                return \"1px\";\r\n              }\r\n            })\r\n            .style(\"stroke\", function (edge: Edge) {\r\n              if (edge.source === d || edge.target === d) {\r\n                return \"#ddd\";\r\n              }\r\n            });\r\n        })\r\n        .call(\r\n          proxy.$d3\r\n            .drag()\r\n            .on(\"start\", dragstarted)\r\n            .on(\"drag\", dragged)\r\n            .on(\"end\", dragended)\r\n        );\r\n\r\n      node\r\n        .append(\"circle\")\r\n        .attr(\"r\", 5)\r\n        .attr(\"fill\", function (d: any, i: number) {\r\n          return z(i);\r\n        });\r\n\r\n      node\r\n        .append(\"text\")\r\n        .attr(\"fill\", function (d: any, i: number) {\r\n          return z(i);\r\n        })\r\n        .attr(\"y\", -20)\r\n        .attr(\"dy\", \".71em\")\r\n        .text(function (d: Node) {\r\n          return d.name;\r\n        });\r\n\r\n      simulation // 初始化力导向图\r\n        .nodes(data.nodes)\r\n        .on(\"tick\", ticked);\r\n\r\n      simulation.force(\"link\").links(data.edges);\r\n\r\n      chart\r\n        .append(\"g\") // 输出标题\r\n        .attr(\"class\", \"bar--title\")\r\n        .append(\"text\")\r\n        .attr(\"fill\", \"#000\")\r\n        .attr(\"font-size\", \"16px\")\r\n        .attr(\"font-weight\", \"700\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", containerWidth / 2)\r\n        .attr(\"y\", 20)\r\n        .text(\"人物关系图\");\r\n\r\n      function ticked() {\r\n        // 力导向图变化函数，让力学图不断更新\r\n        link\r\n          .attr(\"x1\", function (d: any) {\r\n            return d.source.x;\r\n          })\r\n          .attr(\"y1\", function (d: any) {\r\n            return d.source.y;\r\n          })\r\n          .attr(\"x2\", function (d: any) {\r\n            return d.target.x;\r\n          })\r\n          .attr(\"y2\", function (d: any) {\r\n            return d.target.y;\r\n          });\r\n        linkText\r\n          .attr(\"x\", function (d: any) {\r\n            return (d.source.x + d.target.x) / 2;\r\n          })\r\n          .attr(\"y\", function (d: any) {\r\n            return (d.source.y + d.target.y) / 2;\r\n          });\r\n        node.attr(\"transform\", function (d: any) {\r\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\r\n        });\r\n      }\r\n\r\n      function dragstarted(d: any) {\r\n        if (!proxy.$d3.event.active) {\r\n          simulation.alphaTarget(0.3).restart();\r\n        }\r\n        d.fx = d.x;\r\n        d.fy = d.y;\r\n      }\r\n\r\n      function dragged(d :any) {\r\n        d.fx = proxy.$d3.event.x;\r\n        d.fy = proxy.$d3.event.y;\r\n      }\r\n\r\n      function dragended(d :any) {\r\n        if (!proxy.$d3.event.active) {\r\n          simulation.alphaTarget(0);\r\n        }\r\n        d.fx = null;\r\n        d.fy = null;\r\n      }\r\n    };\r\n\t\tonMounted(() => {\r\n\t\t\tinitForce()\r\n\t\t});\r\n    return {\r\n      forceRef,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./d3SimpleForceChart.vue?vue&type=template&id=d84c550e&ts=true\"\nimport script from \"./d3SimpleForceChart.vue?vue&type=script&lang=ts\"\nexport * from \"./d3SimpleForceChart.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\前端\\\\vue3+ts+d3+ant+mock\\\\vue3+ts+d3+ant+mock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\r\nimport d3SimpleForceChart from '@/components/d3SimpleForceChart.vue'\r\nimport { defineComponent, onMounted, reactive, toRefs } from \"vue\";\r\nimport { getForceData } from '@/api/index'\r\nexport default defineComponent({\r\n  name: \"homeCom\",\r\n  components: {\r\n    d3SimpleForceChart\r\n  },\r\n  setup() {\r\n    const state = reactive({\r\n      data: null\r\n    });\r\n    onMounted(() => {\r\n      getForceData().then((res: any) => {\r\n        state.data = res.data\r\n      })\r\n    })\r\n    return {\r\n      ...toRefs(state)\r\n    }\r\n  },\r\n});\r\n","import { render } from \"./home.vue?vue&type=template&id=0c79f849&ts=true\"\nimport script from \"./home.vue?vue&type=script&lang=ts\"\nexport * from \"./home.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\前端\\\\vue3+ts+d3+ant+mock\\\\vue3+ts+d3+ant+mock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["appContext","getCurrentInstance","proxy","config","globalProperties","_hoisted_1","key","render","_ctx","_cache","$props","$setup","$data","$options","_component_d3SimpleForceChart","_resolveComponent","data","_openBlock","_createBlock","_createElementBlock","class","style","_hoisted_2","ref","defineComponent","name","props","type","Object","required","default","setup","useCurrentInstance","forceRef","initForce","containerWidth","value","parentNode","offsetWidth","margin","top","right","bottom","left","width","height","chart","$d3","select","attr","g","append","call","zoom","scaleExtent","on","event","transform","simulation","forceSimulation","force","forceLink","id","d","i","distance","forceManyBody","forceCenter","forceCollide","radius","z","scaleOrdinal","schemeCategory20","link","selectAll","edges","enter","linkText","text","relation","node","nodes","edge","source","target","drag","dragstarted","dragged","dragended","ticked","x","y","active","alphaTarget","restart","fx","fy","links","onMounted","__exports__","components","d3SimpleForceChart","state","reactive","getForceData","then","res","toRefs"],"sourceRoot":""}