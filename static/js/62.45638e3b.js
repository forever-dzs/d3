"use strict";(self["webpackChunkvue3_0"]=self["webpackChunkvue3_0"]||[]).push([[62],{7061:function(t,e,n){function r(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map((function(t){t(n)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,n)}))}}}n.d(e,{Z:function(){return o}});const a=r();var o=a},335:function(t,e,n){var r=n(3396);e["Z"]=()=>{const{appContext:t}=(0,r.FN)(),e=t.config.globalProperties;return{proxy:e}}},2062:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var r=n(3396);const a={key:1};function o(t,e,n,o,s,l){const u=(0,r.up)("d3SimpleChordChart");return t.data?((0,r.wg)(),(0,r.j4)(u,{key:0,data:t.data},null,8,["data"])):((0,r.wg)(),(0,r.iD)("div",a,"加载中。。。"))}var s=n(4870);const l={class:"chord-chart--simple",style:{height:"100%"}},u={ref:"chordRef"};function d(t,e,n,a,o,s){return(0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(),(0,r.iD)("svg",u,null,512))])}var i=n(335),c=(0,r.aZ)({props:{data:{type:Object,required:!0,default:()=>({})}},setup(t){const e=(0,s.iH)(null),{proxy:n}=(0,i.Z)();(0,r.bv)((()=>{a(t.data)})),(0,r.YP)(t,(t=>{a(t.data)}),{deep:!0});const a=t=>{const r=e.value.parentNode.offsetWidth,a=t.names,o=t.matrix,s={top:100,right:60,bottom:100,left:60},l=r-s.left-s.right,u=700-s.top-s.bottom,d=.5*Math.min(l,u)-40,i=d-30;let c=n.$d3.select(e.value).html("").attr("width",l+s.left+s.right).attr("height",u+s.top+s.bottom),f=n.$d3.chord().padAngle(.1).sortSubgroups(n.$d3.descending)(o),p=n.$d3.arc().innerRadius(i).outerRadius(d),g=n.$d3.ribbon().radius(i),h=n.$d3.scaleOrdinal().domain(n.$d3.range(4)).range(["#98abc5","#7b6888","#a05d56","#ff8c00"]),x=n.$d3Tip().attr("class","d3-tip simple-chord").offset([-10,0]).html((function(t){return t.source.index!==t.source.subindex?"<strong>"+a[t.source.index]+"->"+a[t.source.subindex]+":</strong><span style='color:#ffeb3b'> "+(t.source.value/1e4).toFixed(2)+"万 </span>件<br><strong>"+a[t.target.index]+"->"+a[t.target.subindex]+":</strong><span style='color:#ffeb3b'> "+(t.target.value/1e4).toFixed(2)+"万</span> 件":"<strong>"+a[t.source.index]+"->"+a[t.source.subindex]+":</strong><span style='color:#ffeb3b'> "+(t.source.value/1e4).toFixed(2)+"万</span> 件"}));c.call(x);let b=c.append("g").attr("transform","translate("+r/2+","+(u+s.top+s.bottom)/2+")").datum(f),m=b.append("g").attr("class","groups").selectAll("g").data((function(t){return t.groups})).enter().append("g");m.append("path").style("fill",(function(t){return h(t.index)})).style("stroke",(function(t){return n.$d3.rgb(h(t.index)).darker()})).attr("d",p),m.append("g").attr("class","group-name").attr("transform",(function(t){return"rotate("+(180*(t.endAngle-(t.endAngle-t.startAngle)/2)/Math.PI-90)+") translate("+(d+60)+",0)"})).append("text").attr("fill",(function(t){return n.$d3.rgb(h(t.index)).darker()})).attr("x",8).attr("dy",".35em").attr("transform",(function(t){return t.endAngle-(t.endAngle-t.startAngle)/2>Math.PI?"rotate(180) translate(-16)":null})).style("text-anchor",(function(t){return t.endAngle-(t.endAngle-t.startAngle)/2>Math.PI?"end":null})).style("font-size","16px").style("font-weight","700").text((function(t){return a[t.index]}));let v=m.selectAll(".group-tick").data((function(t){return y(t,1e3)})).enter().append("g").attr("class","group-tick").attr("transform",(function(t){return"rotate("+(180*t.angle/Math.PI-90)+") translate("+d+",0)"}));function y(t,e){var r=(t.endAngle-t.startAngle)/t.value;return n.$d3.range(0,t.value,e).map((function(e){return{value:e,angle:e*r+t.startAngle}}))}v.append("line").attr("x2",6),v.filter((function(t){return t.value%5e3===0})).append("text").attr("x",8).attr("dy",".35em").attr("transform",(function(t){return t.angle>Math.PI?"rotate(180) translate(-16)":null})).style("text-anchor",(function(t){return t.angle>Math.PI?"end":null})).text((function(t){return(t.value/1e4).toFixed(2)+"万"})),b.append("g").attr("class","ribbons").selectAll("path").data((function(t){return t})).enter().append("path").on("mouseover",x.show).on("mouseout",x.hide).attr("d",g).style("fill","#fff").style("stroke","#fff").transition().duration(50).delay((function(t,e){return 50*e})).style("fill",(function(t){return h(t.target.index)})).style("cursor","pointer").style("stroke",(function(t){return n.$d3.rgb(h(t.target.index)).darker()})),c.append("g").attr("class","chart--title").append("text").attr("fill","#000").attr("font-size","16px").attr("font-weight","700").attr("text-anchor","middle").attr("x",r/2).attr("y",20).text("简单弦图")};return{chordRef:e}}}),f=n(89);const p=(0,f.Z)(c,[["render",d]]);var g=p,h=n(7860),x=n(7061),b=(0,r.aZ)({components:{d3SimpleChordChart:g},setup(){(0,r.bv)((()=>{t(),x.Z.on("searchData",(()=>{t()}))}));const t=()=>{(0,h.at)().then((t=>{e.data=t.data}))},e=(0,s.qj)({data:null});return{...(0,s.BK)(e)}}});const m=(0,f.Z)(b,[["render",o]]);var v=m}}]);
//# sourceMappingURL=62.45638e3b.js.map