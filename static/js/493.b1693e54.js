"use strict";(self["webpackChunkvue3_0"]=self["webpackChunkvue3_0"]||[]).push([[493],{7061:function(t,e,a){function r(t){return{all:t=t||new Map,on:function(e,a){var r=t.get(e);r?r.push(a):t.set(e,[a])},off:function(e,a){var r=t.get(e);r&&(a?r.splice(r.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var r=t.get(e);r&&r.slice().map((function(t){t(a)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return o}});const n=r();var o=n},335:function(t,e,a){var r=a(3396);e["Z"]=()=>{const{appContext:t}=(0,r.FN)(),e=t.config.globalProperties;return{proxy:e}}},493:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var r=a(3396);const n={key:0,class:"gutter-example simple-pie-chart-demo"},o={key:1};function i(t,e,a,i,u,d){const l=(0,r.up)("d3SimpleCircleChart"),c=(0,r.up)("a-card"),s=(0,r.up)("a-col"),p=(0,r.up)("d3SimplePieChart"),f=(0,r.up)("a-row");return t.data?((0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(f,{gutter:10},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:12,class:"gutter-row"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{hoverable:"",title:"D3 简单圆环图"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{data:t.data},null,8,["data"])])),_:1})])),_:1}),(0,r.Wm)(s,{span:12,class:"gutter-row"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{hoverable:"",title:"D3 简单饼图"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{data:t.data},null,8,["data"])])),_:1})])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",o,"加载中。。。"))}var u=a(4870);const d={class:"pie-chart--simple",style:{height:"100%"}},l={ref:"pieRef"};function c(t,e,a,n,o,i){return(0,r.wg)(),(0,r.iD)("div",d,[((0,r.wg)(),(0,r.iD)("svg",l,null,512))])}var s=a(335),p=(0,r.aZ)({props:{data:{type:Array,required:!0,default:()=>[]}},setup(t){const e=(0,u.iH)(null),{proxy:a}=(0,s.Z)();let n=null;(0,r.bv)((()=>{o(t.data)})),(0,r.YP)(t,(t=>{o(t.data)}),{deep:!0});const o=t=>{const r=e.value.parentNode.offsetWidth,o={top:80,right:60,bottom:80,left:60},i=r-o.left-o.right,u=600-o.top-o.bottom;let d=a.$d3.select(e.value).html("").attr("width",i+o.left+o.right).attr("height",u+o.top+o.bottom);const l=Math.min(i,u)/2;let c=d.append("g").attr("transform","translate("+(i/2+o.left)+","+(o.top+l)+")"),s=a.$d3.scaleOrdinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]),p=a.$d3.arc().innerRadius(0).padAngle(0),f=a.$d3.arc().outerRadius(l-10).innerRadius(l-10),g=a.$d3.arc().outerRadius(l-60).innerRadius(l-60),h=a.$d3.arc().outerRadius(l+40).innerRadius(l+40),m=a.$d3.pie().sort(null).value((function(t){return t.population}));const x=a.$d3.sum(t,(function(t){return t.population}));s.domain(a.$d3.map(t,(function(t){return t.age})).keys()),c.selectAll(".arc").data(m(t)).enter().append("path").attr("cursor","pointer").attr("class","arc").attr("stroke",(function(t){return s(t.data.age)})).style("fill",(function(t){return s(t.data.age)})).each((function(t){let e={...t,endAngle:t.startAngle};t.outerRadius=l-10,n=e})).on("mouseover",R(l+20,0)).on("mouseout",R(l-10,150)).transition().duration(100).delay((function(t,e){return 100*e})).attrTween("d",(function(t){var e=a.$d3.interpolate(n,t);return n=e(0),function(t){return p(e(t))}}));const v=m(t);let w=c.append("g"),y=[];v.forEach((function(t){const e=f.centroid(t),a=h.centroid(t);y.push({source:[e[0],e[1]],target:[a[0],a[1]]})})),w.selectAll().data(y).enter().append("path").attr("class","link-line").style("stroke","#999").style("stroke-width",1).attr("fill","none").attr("d",a.$d3.linkHorizontal().source((function(t){return t.source})).target((function(t){return t.target})));let $=c.append("g");function R(t,e){return function(){a.$d3.select(a.$d3.event.target).transition().delay(e).attrTween("d",(function(e){var r=a.$d3.interpolate(e.outerRadius,t);return function(t){return e.outerRadius=r(t),p(e)}}))}}v.forEach((function(t){const e=g.centroid(t);$.append("text").attr("class","age-text").attr("fill","#cddc39").attr("font-weight","700").attr("font-size","14px").attr("text-anchor","middle").attr("x",e[0]).attr("y",e[1]).text((100*t.data.population/x).toFixed(1)+"%")})),v.forEach((function(t){var e=h.centroid(t);$.append("text").attr("class","age-text").attr("fill","#000").attr("font-size","12px").attr("text-anchor",(function(){return e[0]>=0?"start":"end"})).attr("x",e[0]).attr("y",e[1]).text(t.data.age+"岁 : "+(t.data.population/1e4).toFixed(2)+"万人")})),d.append("g").attr("class","arc--title").append("text").attr("fill","#fff").attr("font-size","14px").attr("font-weight","700").attr("transform","translate("+(i/2+o.left)+","+(o.top+l)+")").attr("text-anchor","middle").attr("x",0).attr("y",0).text("XX市人口年龄结构")};return{pieRef:e}}}),f=a(89);const g=(0,f.Z)(p,[["render",c]]);var h=g;const m={class:"ring-chart--simple",style:{height:"100%"}},x={ref:"ringRef"};function v(t,e,a,n,o,i){return(0,r.wg)(),(0,r.iD)("div",m,[((0,r.wg)(),(0,r.iD)("svg",x,null,512))])}var w=(0,r.aZ)({props:{data:{type:Array,required:!0,default:()=>[]}},setup(t){const e=(0,u.iH)(null),{proxy:a}=(0,s.Z)();let n=null;(0,r.bv)((()=>{o(t.data)})),(0,r.YP)(t,(t=>{o(t.data)}),{deep:!0});const o=t=>{const r=e.value.parentNode.offsetWidth,o={top:80,right:60,bottom:80,left:60},i=r-o.left-o.right,u=600-o.top-o.bottom;let d=a.$d3.select(e.value).html("").attr("width",i+o.left+o.right).attr("height",u+o.top+o.bottom);const l=Math.min(i,u)/2;let c=d.append("g").attr("transform","translate("+(i/2+o.left)+","+(o.top+l)+")"),s=a.$d3.scaleOrdinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]),p=a.$d3.arc().innerRadius(l-70).padAngle(.03),f=a.$d3.arc().outerRadius(l-60).innerRadius(l-60),g=a.$d3.arc().outerRadius(l-20).innerRadius(l-20),h=a.$d3.arc().outerRadius(l+20).innerRadius(l+20),m=a.$d3.pie().sort(null).value((function(t){return t.population}));const x=a.$d3.sum(t,(function(t){return t.population}));s.domain(a.$d3.map(t,(function(t){return t.age})).keys()),c.selectAll(".arc").data(m(t)).enter().append("path").each((function(t){let e={...t,endAngle:t.startAngle};t.outerRadius=l-10,n=e})).on("mouseover",y(l+50,0)).on("mouseout",y(l-10,150)).attr("cursor","pointer").attr("class","arc").style("fill",(function(t){return s(t.data.age)})).transition().duration(750).attrTween("d",(function(t){var e=a.$d3.interpolate(n,t);return n=e(0),function(t){return p(e(t))}}));const v=m(t);let w=c.append("g");function y(t,e){return function(){a.$d3.select(a.$d3.event.target).transition().delay(e).attrTween("d",(function(e){var r=a.$d3.interpolate(e.outerRadius,t);return function(t){return e.outerRadius=r(t),p(e)}}))}}v.forEach((function(t){const e=f.centroid(t);w.append("text").attr("class","age-text").attr("fill","#000").attr("font-size","12px").attr("text-anchor","middle").attr("x",e[0]).attr("y",e[1]).text(t.data.age+"岁")})),v.forEach((function(t){const e=g.centroid(t);w.append("text").attr("class","age-text").attr("fill","#cddc39").attr("font-weight","700").attr("font-size","14px").attr("text-anchor","middle").attr("x",e[0]).attr("y",e[1]).text((100*t.data.population/x).toFixed(1)+"%")})),v.forEach((function(t){var e=h.centroid(t);w.append("text").attr("class","age-text").attr("fill","#000").attr("font-size","12px").attr("text-anchor","middle").attr("x",e[0]).attr("y",e[1]).text((t.data.population/1e4).toFixed(2)+"万人")})),d.append("g").attr("class","arc--title").append("text").attr("fill","#000").attr("font-size","14px").attr("font-weight","700").attr("transform","translate("+(i/2+o.left)+","+(o.top+l)+")").attr("text-anchor","middle").attr("x",0).attr("y",0).text("XX市人口年龄结构")};return{ringRef:e}}});const y=(0,f.Z)(w,[["render",v]]);var $=y,R=a(7860),b=a(7061),k=(0,r.aZ)({name:"dePie",components:{d3SimplePieChart:h,d3SimpleCircleChart:$},setup(){(0,r.bv)((()=>{t(),b.Z.on("searchData",(()=>{t()}))}));const t=()=>{(0,R.RT)().then((t=>{e.data=t.data}))},e=(0,u.qj)({data:null});return{...(0,u.BK)(e)}}});const A=(0,f.Z)(k,[["render",i]]);var Z=A}}]);
//# sourceMappingURL=493.b1693e54.js.map