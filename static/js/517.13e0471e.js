"use strict";(self["webpackChunkvue3_0"]=self["webpackChunkvue3_0"]||[]).push([[517],{335:function(t,e,r){var n=r(3396);e["Z"]=()=>{const{appContext:t}=(0,n.FN)(),e=t.config.globalProperties;return{proxy:e}}},7517:function(t,e,r){r.r(e),r.d(e,{default:function(){return m}});var n=r(3396);const a={key:1};function o(t,e,r,o,c,i){const u=(0,n.up)("d3SimpleForceChart");return t.data?((0,n.wg)(),(0,n.j4)(u,{key:0,data:t.data},null,8,["data"])):((0,n.wg)(),(0,n.iD)("div",a,"加载中。。。"))}const c={class:"force-chart--simple",style:{height:"100%"}},i={ref:"forceRef"};function u(t,e,r,a,o,u){return(0,n.wg)(),(0,n.iD)("div",c,[((0,n.wg)(),(0,n.iD)("svg",i,null,512))])}var l=r(4870),s=r(335),f=(0,n.aZ)({name:"d3SimpleForceChart",props:{data:{type:Object,required:!0,default:()=>({})}},setup(t){const{proxy:e}=(0,s.Z)(),r=(0,l.iH)(null),a=()=>{const n=r.value.parentNode.offsetWidth,a=t.data,o={top:60,right:60,bottom:60,left:60},c=n-o.left-o.right,i=700-o.top-o.bottom;let u=e.$d3.select(r.value).attr("width",c+o.left+o.right).attr("height",i+o.top+o.bottom),l=u.append("g").attr("transform","translate("+o.left+","+o.top+")");u.call(e.$d3.zoom().scaleExtent([.5,2]).on("zoom",(()=>{l.attr("transform",e.$d3.event.transform)})));let s=e.$d3.forceSimulation().force("link",e.$d3.forceLink().id((function(t,e){return e})).distance((function(t){return 50*t.value}))).force("charge",e.$d3.forceManyBody()).force("center",e.$d3.forceCenter(c/2,i/2)).force("collide",e.$d3.forceCollide().radius((()=>80))),f=e.$d3.scaleOrdinal(e.$d3.schemeCategory20),d=l.append("g").attr("class","links").selectAll("line").data(a.edges).enter().append("line"),p=l.append("g").attr("class","link-text").selectAll("text").data(a.edges).enter().append("text").text((function(t){return t.relation})),g=l.append("g").attr("class","nodes").selectAll("g").data(a.nodes).enter().append("g").on("mouseover",(function(t){p.style("fill-opacity",(function(e){if(e.source===t||e.target===t)return 1})),d.style("stroke-width",(function(e){if(e.source===t||e.target===t)return"2px"})).style("stroke",(function(e){if(e.source===t||e.target===t)return"#000"}))})).on("mouseout",(function(t){p.style("fill-opacity",(function(e){if(e.source===t||e.target===t)return 0})),d.style("stroke-width",(function(e){if(e.source===t||e.target===t)return"1px"})).style("stroke",(function(e){if(e.source===t||e.target===t)return"#ddd"}))})).call(e.$d3.drag().on("start",x).on("drag",h).on("end",m));function y(){d.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),p.attr("x",(function(t){return(t.source.x+t.target.x)/2})).attr("y",(function(t){return(t.source.y+t.target.y)/2})),g.attr("transform",(function(t){return"translate("+t.x+","+t.y+")"}))}function x(t){e.$d3.event.active||s.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function h(t){t.fx=e.$d3.event.x,t.fy=e.$d3.event.y}function m(t){e.$d3.event.active||s.alphaTarget(0),t.fx=null,t.fy=null}g.append("circle").attr("r",5).attr("fill",(function(t,e){return f(e)})),g.append("text").attr("fill",(function(t,e){return f(e)})).attr("y",-20).attr("dy",".71em").text((function(t){return t.name})),s.nodes(a.nodes).on("tick",y),s.force("link").links(a.edges),u.append("g").attr("class","bar--title").append("text").attr("fill","#000").attr("font-size","16px").attr("font-weight","700").attr("text-anchor","middle").attr("x",n/2).attr("y",20).text("人物关系图")};return(0,n.bv)((()=>{a()})),{forceRef:r}}}),d=r(89);const p=(0,d.Z)(f,[["render",u]]);var g=p,y=r(7860),x=(0,n.aZ)({name:"homeCom",components:{d3SimpleForceChart:g},setup(){const t=(0,l.qj)({data:null});return(0,n.bv)((()=>{(0,y._d)().then((e=>{t.data=e.data}))})),{...(0,l.BK)(t)}}});const h=(0,d.Z)(x,[["render",o]]);var m=h}}]);
//# sourceMappingURL=517.13e0471e.js.map